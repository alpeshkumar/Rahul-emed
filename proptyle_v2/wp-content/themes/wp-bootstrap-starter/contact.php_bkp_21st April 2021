<?php

/**
 * Template Name: Contact
 *
 * Description: Twenty Twelve loves the no-sidebar look as much as
 * you do. Use this page template to remove the sidebar from any page.
 *
 * Tip: to remove the sidebar from all posts and pages simply remove
 * any active widgets from the Main Sidebar area, and the sidebar will
 * disappear everywhere.
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

$company = companyName();
$captchaGood = isCaptchaGood();

$msg = '';
if (isLiveSite() && $captchaGood && !empty($_POST)) 
{
    $msg = retrieveDataJSON($_POST);
    $msg = 'Thank you for contacting ' . $company . '. We have received your request and we will be in touch with you shortly.';
} 
else if (!$captchaGood && !empty($_POST)) 
{
    $msg = 'You must prove you are not a robot.';
}

get_header(); ?>



<section class="section-block contact-section">

    
    <section class="section-block contact-section style2">
        <div class="container">
            <ol class="breadcrumb" vocab="https://schema.org/" typeof="BreadcrumbList" style="font-size:1.25em">
                <li class="breadcrumb-item" property="itemListElement" typeof="ListItem" style="list-style-type:none; display:inline">
                    <a property="item" typeof="WebPage" href="<?php echo site_url(); ?>">
                        <span property="name">Home</span></a>
                    <meta property="position" content="1">
                </li>
                <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem" style="list-style-type:none; display:inline">
                    <a property="item" typeof="WebPage" href="<?php echo $_SERVER['REQUEST_URI']; ?>">
                        <span property="name">Contact</span></a>
                    <meta property="position" content="2">
                </li>
            </ol>
             <form id="contact_form" method="POST" action="<?php echo site_url();?>/contact">
            <div class="row-xs-height">
                <div class="row">
                    <div class="col-md-9">
                        <div class="row">
                            <!--<div class="col-md-12">
                                <img src="http://placehold.it/900x250" width="100%" alt="">
                            </div>-->
                            <div class="offset-md-2 col-md-10">
                                <h1>Contact Us</h1>
                                <?php echo paraText('We are always keen to hear from our customers. Please fill out the form below and send us a message and we will get back to you as soon as possible. We look forward to hearing from you.');?>
                            </div>
                           
                            <div class="offset-md-1 col-md-10 mt-3">
                                <div class="form-group">
                                    <div class="row">
                                        <label class="select-group form-label col-md-4 text-sm-left text-md-right">Type of User</label>
                                        <select name="usertype" class="col-md-8 form-control" required>
                                            <option value="" disabled selected>Please make a selection</option>
                                            <option value="buyer">Registered customer</option>
                                            <option value="agent">Estate agent</option>
                                            <option value="advertiser">Advertiser</option>
                                            <option value="general">General enquiry</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label class="select-group form-label col-md-4 text-sm-left text-md-right">Full Name</label>
                                        <input type="text" name="fullname" class="col-md-8 form-control" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label class="select-group form-label col-md-4 text-sm-left text-md-right">Email</label>
                                        <input name="email" class="col-md-8 form-control" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label class="select-group form-label col-md-4 text-sm-left text-md-right">Phone</label>
                                        <input type="text" name="phone" class="col-md-8 form-control">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label class="select-group form-label col-md-4 text-sm-left text-md-right">Company Name (if applicable):</label>
                                        <input type="text" name="company" class="col-md-8 form-control">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label class="select-group form-label col-md-4 text-sm-left text-md-right">Message</label>
                                        <textarea class="col-md-8 form-control" name="message" rows="12" required></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label class="select-group form-label col-md-4 text-sm-left text-md-right"></label>
                                         <div id="recaptcha" class="g-recaptcha" data-sitekey="6LfvFQIaAAAAAGzQAN_V5DhUfqagHNXN358gzzhH" data-callback="onRSubmit2" data-size="invisible"></div>
                                        <div class="col-md-3">
                                            <button type="submit" class="form-button">Send Message</button>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            
                        </div>
                        
                    </div>
                   
                </div>               
                
            </div>
            </form>

        </div>
    </section>

    



    
</section>

<?php
if (!empty($_POST['email'])) 
{
} 
else 
{
    $msg = '';
}
?>

<?php get_footer(); ?>

<?php
if ($msg) {
?>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery('#popup_message h4').html('<?php echo $msg; ?>');
            jQuery("#popup_message").modal("show");
        });
    </script>
<?php
}
?>

<script>
   
   function onRSubmit2(token)
   {
      document.querySelector('#contact_form').submit();
   }
   
   function onRSubmit(event)
   {
       event.preventDefault();
       grecaptcha.execute(); 
   }
   
   jQuery(document).ready(function() 
    {
        document.querySelector('#contact_form').addEventListener('submit', onRSubmit);
    });
 </script>