<!DOCTYPE html>
<html lang="en-US"><head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0">
<meta name="robots" content="index,follow">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="xmlrpc.php">
<link rel="shortcut icon" href="favicon.png">

<meta name="description" content="Our automated virtual lawyer helps people save huge amounts of costs and time. Our beskope legal service combined with our automated virtual lawyer is a high quality low cost alternative to high street lawyers. Search over 5000 case topics that match your needs and get a notice or a response done very quickly."><meta name="keywords" content="biggest online legal platform, intelligent online lawyer, automated virtual lawyer, cutting-edge law technology"><title>Send a legal letter or respond to a legal letter. Register today to save huge amounts of money on legal fees. Register as a lawyer and get instructed by clients thus improving your business opportunity. - AllTheLegal</title>
<style>

#header .js-nav-menu a
{
    color: #999;
}

#header .js-nav-menu a:hover, #header .js-nav-menu a:focus
{
    color: #3d3533;
}



body 
{
    padding-right: 0px !important;
}

.wp-media-buttons > button, .media-button-insert, .media-button-gallery, .upload-ui .button-hero
{
    white-space: normal;
    background: #cecece;
    border-color: #fff;
    border:none;
    color: #b01e42;
    padding:5px;
    border-radius:5px;
}

</style>

<script type="text/javascript" async="" src="https://www.gstatic.com/recaptcha/releases/RDRwZ7RcROX_wCxEJ01WeqEX/recaptcha__en.js" crossorigin="anonymous" integrity="sha384-YHdfrYzs7gUdBgyFC/o9ARyOE4cDTnbhyEnps/7e8cEFG8JYmN/XrWuUqZMlgSWP"></script><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-162506464-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-162506464-1');
</script>

 

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css">


<meta name="robots" content="noindex, nofollow">
<link rel="dns-prefetch" href="//s.w.org">
<link rel="alternate" type="application/rss+xml" title="allthelegal » Feed" href="feed/">
<link rel="alternate" type="application/rss+xml" title="allthelegal » Comments Feed" href="comments/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost\/yash\/thesimplylegal\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="wp-includes/js/wp-emoji-release.min.js?ver=5.7.2" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="wp-block-library-css" href="wp-includes/css/dist/block-library/style.min.css?ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="wp-bootstrap-starter-bootstrap-css-css" href="wp-content/themes/wp-bootstrap-starter/inc/assets/css/bootstrap.min.css?ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="wp-bootstrap-starter-font-awesome-css" href="wp-content/themes/wp-bootstrap-starter/inc/assets/css/font-awesome.min.css?ver=4.1.0" type="text/css" media="all">
<link rel="stylesheet" id="wp-bootstrap-starter-style-css" href="wp-content/themes/wp-bootstrap-starter/style.css?ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="wp-bootstrap-starter-roboto-roboto-css" href="wp-content/themes/wp-bootstrap-starter/inc/assets/css/presets/roboto-roboto.css?ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="wp-docs-css-css" href="wp-content/themes/wp-bootstrap-starter/inc/assets/css/docs.css?ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="wp-wp-color-style-css-css" href="wp-content/themes/wp-bootstrap-starter/inc/assets/css/color-style.css?ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="wp-wp-jquery-ui.min-css-css" href="wp-content/themes/wp-bootstrap-starter/inc/assets/css/jquery-ui.min.css?ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="wp-style-css-css" href="wp-content/themes/wp-bootstrap-starter/inc/assets/css/style.css?ver=5.7.2" type="text/css" media="all">
<link rel="https://api.w.org/" href="wp-json/"><link rel="alternate" type="application/json" href="wp-json/wp/v2/pages/4"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 5.7.2">
<link rel="canonical" href="">
<link rel="shortlink" href="">
<link rel="alternate" type="application/json+oembed" href="wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%2Fyash%2Fthesimplylegal%2F">
<link rel="alternate" type="text/xml+oembed" href="wp-json/oembed/1.0/embed?url=http%3A%2F%2Flocalhost%2Fyash%2Fthesimplylegal%2F&amp;format=xml">
    <style type="text/css">
        #page-sub-header { background: #563D7C; }
    </style>
    <style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="home page-template page-template-page page-template-home page-template-pagehome-php page page-id-4 group-blog" data-new-gr-c-s-check-loaded="8.881.0" data-gr-ext-installed="">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
    	<!-- #masthead -->
    <!-- Header -->
        
        <header id="header" class="navbar navbar-default">
        <!--<div class="cookie_text alert alert-warning fade in alert-dismissable">
		<a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a>
			We use cookies to help improve your experience. By using our services, you agree to our terms of use, cookie and privacy policies. 		
        </div>-->
        <!-- Header top Start -->
            <div class="col-xs-10 col-md-2 col-logo">
                    <a class="navbar-brand" href="http://localhost/yash/thesimplylegal">
                       AllTheLegal                    </a>
            </div>
            <div class="col-md-10 hidden-xs">
             <ul class="nav navbar-nav js-nav-menu">
                            <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jc2VuZA==" onclick="location.hash='send'; location.reload();"><i class="fa fa-send"></i>&nbsp;Send A Legal Letter</a></li>
                            <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jcmVzcG9uZA==" onclick="location.hash='respond'; location.reload();"><i class="fa fa-bell"></i>&nbsp;Respond To A Notice</a></li>
							<li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jZG9j" onclick="location.hash='doc'; location.reload();"><i class="fa fa-pencil"></i>&nbsp;Legal Doc Templates</a></li>
                            <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jaGVscGNhc2U=" onclick="location.hash='helpcase'; location.reload();"><i class="fa fa-user"></i>&nbsp;Help With Your Case</a></li>
                            <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jbGF3eWVycw==" onclick="location.hash='lawyers'; location.reload();"><i class="fa fa-search"></i>&nbsp;Find And Instruct Lawyers</a></li>
                            <li><a href="topics-directory"><i class="fa fa-list"></i>&nbsp;Topics Directory</a></li>
                            <!--<li><a href="contact"><i class="fa fa-info-circle"></i>&nbsp;Contact Us</a></li>-->
                        </ul>
            </div>
            <div class="col-xs-2 col-menu-button visible-xs">
                <button type="button" class="navbar-toggle js-menu-button" data-toggle="collapse" data-target=".navbar-collapse">
                    <em class="icon-icon-menu"></em>
                </button>
            </div>
            <div class="header-top">
                <div class="container">
                    <div class="row">
                                                <!--<div class="col-xs-6 col-md-4 col-sm-4  m_t_xs_0 hidden-xs">
                                <button type="button" class="navbar-toggle js-menu-button" data-toggle="collapse" data-target=".navbar-collapse">
                                    <em class="icon-icon-menu"></em>
                                    <span class="hidden-xs">Menu</span>
                                </button>
                        </div>-->
                        <div class="col-xs-12 col-md-12 col-sm-12 col-header-contact header_logged">
                            <div class="header-contact text-right clearfix">
                                                                 <ul class="clearfix">                                   
                                                                                <li class="header-login">
                                            <a href="login"><span><i class="fa fa-sign-in"></i>&nbsp;Sign in</span></a>
                                        </li>
                                        
                                        <li class="header-signup"><a href="register"><i class="fa fa-user"></i>&nbsp;<span>Sign up</span></a></li>
                                                                            
                                    
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Nav Start -->
            <nav id="nav" class="main-menu">
                <div class="container">
                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav js-nav-menu">
                            <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jc2VuZA==" onclick="location.hash='send'; location.reload();"><i class="fa fa-send"></i>&nbsp;Send A Legal Letter</a></li>
                            <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jcmVzcG9uZA==" onclick="location.hash='respond'; location.reload();"><i class="fa fa-bell"></i>&nbsp;Respond To A Notice</a></li>
							<li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jZG9j" onclick="location.hash='doc'; location.reload();"><i class="fa fa-pencil"></i>&nbsp;Legal Doc Templates</a></li>
                            <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jaGVscGNhc2U=" onclick="location.hash='helpcase'; location.reload();"><i class="fa fa-user"></i>&nbsp;Help With Your Case</a></li>
                            <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jbGF3eWVycw==" onclick="location.hash='lawyers'; location.reload();"><i class="fa fa-search"></i>&nbsp;Find And Instruct Lawyers</a></li>
                            <li><a href="faq"><i class="fa fa-gavel"></i>&nbsp;FAQs</a></li>
                            <!--<li><a href="contact"><i class="fa fa-info-circle"></i>&nbsp;Contact Us</a></li>-->
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
                        
                	<div id="content" class="site-content">
		
        
			<div class="row">
                              


	<section id="primary" class="content-area col-sm-12">
			<article id="post-4" class="post-4 page type-page status-publish hentry">
				
			  <div class="entry-content">
				<div class="col-xs-12 col-md-12 col-sm-12 col-xl-12">
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jc2VuZA==">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-send"></i><br>
                        I want to send a legal notice or a letter
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this if you want to send a money claim or legal notice to someone
                    </div>
                    <ul class="home-page-list">
                        <li>Make use of automated virtual lawyer</li>
                        <li>Help available from our legal experts via instant messaging</li>
                        <li>Typically costs £25</li>
                        <li>No subscription required</li>
                    </ul>
                    </a>
                </div>  

                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jcmVzcG9uZA==">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-bell"></i><br>
                        I want to respond to a legal notice or letter
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this if you have received a legal letter and want to respond
                    </div>
                    <ul class="home-page-list">
                        <li>Make use of automated virtual lawyer</li>
                        <li>Help available from our legal experts via instant messaging</li>
                        <li>Typically costs £25</li>
                        <li>No subscription required</li>
                    </ul>
                    </a>
                </div>  
                
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jZHJhZnQ=">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-pencil"></i><br>
                        I want to prepare or draft a legal document
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this for items such as contracts, agreements, NDAs, terms of service etc
                    </div>
                    <ul class="home-page-list">
                        <li>Make use of automated virtual lawyer</li>
                        <li>Help available from our legal experts via instant messaging</li>
                        <li>Typically costs £10</li>
                        <li>No subscription required</li>
                    </ul>
                    </a>
                </div>  
                
                <div class="list-group col-xs-12 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xl-8 col-xl-offset-2">
                    <a class="list-group-item" href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jaGVscGNhc2U=">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-user"></i><br>
                        I have bespoke legal needs and want help with my case
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this for bespoke and complex legal needs including legal aid and court representation
                    </div>
                    <ul class="home-page-list">
                        <li>Legal experts prepare your notice, response or document</li>
                        <li>Our legal experts can help you with your legal aid application</li>
                        <li>Help with court representation or McKenzie friend service</li>
                        <li>Instantly interact with our legal experts</li>
                        <li>Secure document storage and management</li>
                        <li>Typically costs £50</li>
                        <li>Situation specific discounts available</li>
                        <li>Priority option available</li>
                        <li>No subscription required</li>
                    </ul>
                    </a>
                </div> 
                
                <!--<div class="list-group col-xs-12 col-md-6 col-sm-6 col-xl-6">
                    <a class="list-group-item" href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jbGF3eWVycw==">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-gavel"></i><br/>
                        I simply want a lawyer who will take care of everything
                    </h4>
                    <hr/>
                    <div class="list-group-item-text">
                        Use this if you want the legal expert to help you with everything for your case
                    </div>
                    <ul class="home-page-list">
                        <li>You get a choice of suitable lawyers to choose from</li>
                        <li>Simply instruct for your case from the dashboard</li>
                        <li>Legal expert takes care of everything</li>
                        <li>You also agree to separate lawyer terms and conditions</li>
                        <li>No subscription required</li>
                    </ul>
                    </a>
                </div> -->
                
				</div>
                <div class="clearfix"></div>
                <br>
                
                <div class="">
                <div class="list-group2 col-xs-4 col-md-4 col-sm-4 col-xl-4">
                    <div class="list-group-item">
                    <h4 class="list-group-item-heading countd"><h3><i class="fa fa-gavel"></i></h3>411 documents generated</h4>
                    <hr>
                    </div>
                </div>  

               <div class="list-group2 col-xs-4 col-md-4 col-sm-4 col-xl-4">
                    <div class="list-group-item">
                    <h4 class="list-group-item-heading countm"><h3><i class="fa fa-gbp"></i></h3>1,000 saved per user</h4>
                    <hr>
                    </div>
                </div>   
                
                <div class="list-group2 col-xs-4 col-md-4 col-sm-4 col-xl-4">
                    <div class="list-group-item">
                    <h4 class="list-group-item-heading countt"><h3><i class="fa fa-clock-o"></i></h3>30 days saved per user</h4>
                    <hr>
                    </div>
                </div>   
                
				</div>
                <div class="clearfix"></div>
                <br>
                <br>
                
                <div class="row">
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2">
                    <h4 class="carousel-title">What our customers have to say about our platform</h4>
                    <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="15000">
                        <!-- Carousel indicators -->
                        <ol class="carousel-indicators">
                            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                            <li data-target="#myCarousel" data-slide-to="1"></li>
                            <li data-target="#myCarousel" data-slide-to="2"></li>
                            <li data-target="#myCarousel" data-slide-to="3"></li>
                            <li data-target="#myCarousel" data-slide-to="4"></li>
                            <li data-target="#myCarousel" data-slide-to="5"></li>
                        </ol>   
                        <!-- Wrapper for carousel items -->
                        <div class="carousel-inner">
                            <div class="item carousel-item active">
                                <p class="testimonial"><i class="fa fa-quote-left testimonial_fa" aria-hidden="true"></i>&nbsp;I simply can't believe that I got £60 waived off for a bus lane penalty charge and costed me only £6 for the beskope legal service. Highly recommended platform for quality low cost legal services.</p>
                                <p class="overview"><b>Anonymous</b>, Blackpool, England</p>
                            </div>
                            <div class="item carousel-item">
                                <p class="testimonial"><i class="fa fa-quote-left testimonial_fa" aria-hidden="true"></i>&nbsp;I had a money claim of 35k field against me and this platform provided me the do it yourself legal letter using there template to file me defence which I must say was quite complex. Not only did my defence get accepted in the court but I won in the end. All this cost me was £60.</p>
                                <p class="overview"><b>Jay Patel</b>, Addlestone, Surrey, England</p>
                            </div>
                            <div class="item carousel-item">
                                <p class="testimonial"><i class="fa fa-quote-left testimonial_fa" aria-hidden="true"></i>&nbsp;This platform helped my file my legal defence to the claimant's lawyers which got the penalty charge of £100 waived off. The price was just unbelievable only £10 and the service was top class and very fast.</p>
                                <p class="overview"><b>Anonymous</b>, Preston, England</p>
                            </div>
                            <div class="item carousel-item">
                                <p class="testimonial"><i class="fa fa-quote-left testimonial_fa" aria-hidden="true"></i>&nbsp;I run a business and had a supplier negligence causing me loss of business worth thousands of pounds. This platform helped me prepare my claim using the beskope legal service and guess what my business loss was recovered as the supplier agreed to pay the entire sum of money. The platform is very easy to use and service is very quick and low priced.</p>
                                <p class="overview"><b>Kash</b>, London, England</p>
                            </div>
                             <div class="item carousel-item">
                                <p class="testimonial"><i class="fa fa-quote-left testimonial_fa" aria-hidden="true"></i>&nbsp;I paid to get next day delivery. I never received the goods, even after calling them and emailing them several times. I used all the legal to generate a proper response to the supplier. Within 5 days I had my money was refunded. Great service and very cost effective.</p>
                                <p class="overview"><b>Shreya</b>, Weybridge, England</p>
                            </div>
                            <div class="item carousel-item">
                                <p class="testimonial"><i class="fa fa-quote-left testimonial_fa" aria-hidden="true"></i>&nbsp;I am a single mom and I can’t afford to go to lawyers who charges 250 pounds + VAT an hour. I came to know all the legal through google, I used the service to send a legal letter out to this shoe Company who was not refunding my 75 pounds for the goods I purchased and never got delivered. I chased them for 4 months, my credit card company was also not helpful. The letter did the job for me for only 10 pounds and I received the full refund in 10 days of sending the letter.</p>
                                <p class="overview"><b>Rachel</b>, London, England</p>
                            </div>
                        </div>
                        <!-- Carousel controls -->
                        <a class="carousel-control left carousel-control-prev" href="#myCarousel" data-slide="prev">
                            <i class="fa fa-angle-left"></i>
                        </a>
                        <a class="carousel-control right carousel-control-next" href="#myCarousel" data-slide="next">
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </div>
                    </div>
                </div>
                
                <div class="clearfix"></div>
                <br>
                <br>
                
                <div class="col-xs-12 col-md-12 col-sm-12 col-xl-12">
                <div class="list-group col-xs-12 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1 col-xl-10 col-xl-offset-1">
                    <a class="list-group-item" href="/register#business">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-user"></i><br>
                        I am a lawyer or a legal professional
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Click here to register with us for free and improve your opportunity for business by marketing in front of our growing user base
                    </div>
                    </a>
                </div>  
                </div>
                
                <div class="clearfix"></div>
                <br>
                <br>
                
                <div class="list-group col-xs-12 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1 col-xl-10 col-xl-offset-1">
                    <!--<div class="list-group-item tag-line">-->
                    <div>
                    <h4 class="list-group-item-heading">
                    Use our compensation calculators below to find out how much you can claim
                    </h4>
                    </div>
                </div>  
                
                <div class="col-xs-12 col-md-12 col-sm-12 col-xl-12">
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-calculator"></i><br>
                        Had a personal injury accident?
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this to calculate your personal injury compensation
                    </div>
                    </a>
                </div>  

                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-calculator"></i><br>
                        Were you discriminated at work?
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this to calculate your discrimination compensation
                    </div>
                    </a>
                </div>  
                
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-calculator"></i><br>
                        Was your flight delayed or disrupted?
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this to calculate your flight delay compensation number
                    </div>
                    </a>
                </div>  
                
				</div>
                
                
                <div class="clearfix"></div>
                <br>
                <br>
                
                <div class="list-group col-xs-12 col-md-10 col-md-offset-1 col-sm-10 col-sm-offset-1 col-xl-10 col-xl-offset-1">
                    <!--<div class="list-group-item tag-line">-->
                    <div>
                    <h4 class="list-group-item-heading">
                    Popular Topics
                    </h4>
                    </div>
                </div>  
                
                <div class="col-xs-12 col-md-12 col-sm-12 col-xl-12">
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-send"></i><br>
                        Personal injury in a road accident
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this to send your claim if you have had a road accident
                    </div>
                    </a>
                </div>  
                
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-send"></i><br>
                        Flight disruption or cancellation
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this to send your claim if you have had a flight delayed or disrupted
                    </div>
                    </a>
                </div>  
                
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-bell"></i><br>
                        Appeal against a parking ticket
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this to defend against a parking ticket issued to you
                    </div>
                    </a>
                </div>  
                
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-pencil"></i><br>
                        Tenancy Agreement
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this for a tenancy agreement if you are a landlord or a tenant
                    </div>
                    </a>
                </div>  
                
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-user"></i><br>
                        Get your document reviewed
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this to get your document reviewed by our legal experts.
                    </div>
                    </a>
                </div> 
                
                <div class="list-group col-xs-12 col-md-4 col-sm-4 col-xl-4">
                    <a class="list-group-item" href="javascript:void(0);" onclick="javascript:askToLogin();">
                    <h4 class="list-group-item-heading">
                        <i class="fa fa-user"></i><br>
                        GDPR compliance
                    </h4>
                    <hr>
                    <div class="list-group-item-text">
                        Use this for beskope and custom GDPR compliance needs.
                    </div>
                    </a>
                </div>
                
                <div class="col-xs-12 col-md-4 col-sm-4 col-xl-4 col-md-offset-4 col-sm-offset-4 col-xl-offset-4">
                <h3 style="text-align:center">
                <a href="topics-directory">Browse all our topics</a>
                </h3>
                </div>
                
				</div>
                
                </div>
				
            
				
			</article>
			
	
	</section><!-- #primary -->




<div class="clearfix"></div>
<!--<br/>
<div class="trustpilot-widget" data-locale="en-GB" data-template-id="5419b6a8b0d04a076446a9ad" data-businessunit-id="5c31f46fdc59530001081766" data-style-height="24px" data-style-width="100%" data-theme="light">
<a href="https://uk.trustpilot.com/review/allthelegal.com" target="_blank">Trustpilot</a>
</div>
<br/>-->
			</div><!-- .row -->
		
	</div><!-- #content -->
    	<div class="clearfix"></div>
    <div id="footer">
<div class="footer-bottom">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-3 col-xs-12">
                <div class="footer-menu">
                    <h3>For Users</h3>
                    <ul class="clearfix">
                        <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jc2VuZA==" alt="send a legal letter" onclick="location.hash='send'; location.reload();"><i class="fa fa-send"></i>&nbsp;Send a legal letter</a></li>
                        <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jcmVzcG9uZA==" alt="respond to a legal notice" onclick="location.hash='respond'; location.reload();"><i class="fa fa-bell"></i>&nbsp;Respond to a legal letter</a></li>
						<li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jZG9j" alt="draft a legal document such as wills, agreements, contracts" onclick="location.hash='doc'; location.reload();"><i class="fa fa-pencil"></i>&nbsp;Legal doc templates</a></li>
                        <li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jaGVscGNhc2U=" alt="get help with your case" onclick="location.hash='helpcase'; location.reload();"><i class="fa fa-user"></i>&nbsp;Help with your case</a></li>
						<li><a href="login/?redirect_to=aHR0cDovL2xvY2FsaG9zdC95YXNoL3RoZXNpbXBseWxlZ2FsL2Rhc2hib2FyZC8jbGF3eWVycw==" alt="find lawyers and instruct them for your case" onclick="location.hash='lawyers'; location.reload();"><i class="fa fa-search"></i>&nbsp;Find and instruct lawyers</a></li>
                        <li><a href="topics-directory" alt="browse through our topics directory such as personal injury in a road accident"><i class="fa fa-list"></i>&nbsp;Topics directory</a></li>
                        							<li><a href="register#private"><i class="fa fa-user"></i>&nbsp;Register as a user</a></li>	
<li><a href="login"><i class="fa fa-sign-in"></i>&nbsp;Sign In</a></li>	                            
											</ul>
                </div>
            </div>
			
						<div class="clearfix visible-xs"></div>
            <div class="col-md-3 col-sm-3 col-xs-12">
                <div class="footer-menu">
                    <h3>For Legal Professionals</h3>
                    <ul class="clearfix">
                       <li><a href="register#business"><i class="fa fa-user"></i>&nbsp;Register as a legal professional</a></li>
					</ul>
                </div>
            </div>
            			
						
            <div class="clearfix visible-xs"></div>
            <div class="col-md-3 col-sm-3 col-xs-12">
                <div class="footer-menu">
                    <h3>About</h3>
                    <ul class="clearfix">
                        <li><a href="faq"><i class="fa fa-gavel"></i>&nbsp;FAQs</a></li>
						<li><a href="privacy-policy"><i class="fa fa-user-secret"></i>&nbsp;Privacy Policy</a></li>
                        <li><a href="terms-and-conditions"><i class="fa fa-info-circle"></i>&nbsp;Terms Of Use</a></li>
                        <!--<li><a href="javascript:void(0)" onclick="javacsript:$('#popup_cookies').modal('show');"><i class="fa fa-info-circle"></i>&nbsp;Cookies We Use</a></li>-->
                    </ul>
                </div>
            </div>
            <div class="clearfix visible-xs"></div>
            <div class="col-md-3 col-sm-3 col-xs-12">
                <div class="footer-menu">
                    <h3>Contact</h3>
                    <ul class="clearfix">
                        <li><a href="mailto:info@allthegal.com"><i class="fa fa-envelope"></i>&nbsp;Email Us</a></li>      
						<li><a href="tel:+442076327570"><i class="fa fa-phone"></i>&nbsp;Call Us</a></li>
                        <li><a target="_blank" href="http://www.twitter.com/AllTheLegal"><i class="fa fa-twitter"></i>&nbsp;Find us on twitter</a></li>
                        <li><a target="_blank" href="https://www.facebook.com/All-The-Legal-108897837430170"><i class="fa fa-facebook"></i>&nbsp;Find us on facebook</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="copyright text-center">
                    <p><a href="http://localhost/yash/thesimplylegal">copyright © AllTheLegal 2021</a></p>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="scroll-top" style="display: none;"><em class="icon-icon-backtotop-1"></em></div></div>
</div><!-- #page -->

                				<!--<div id="popup_cookies" class="modal fade ng-scope" role="dialog">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header" style="text-align:center">
                                <button type="button" class="close" data-dismiss="modal">×</button>
                                <h4 class="modal-title">Cookies We Use</h4>
                            </div>
                         <div class="modal-body">
                        <span>We use the following cookies to improve user experience. </span>
                         <div class="tabs_panel">
                        <div class="table">
                        <div class="trow header">
                        <div class="cell">Cookie Name</div>
                        <div class="cell">What It Does</div>
                        <div class="cell">Expiry Time</div>
                        </div>
                        <div class="trow">
                        <div class="cell">atl_topic_xxx</div>
                        <div class="cell">stores your questionnaire data to save you refill them next time</div>
                        <div class="cell">1 year</div>
                        </div>
						</div>
                        </div>
                        </div>                            
                        </div>                        
                    </div>
                </div>-->
                <!--<div id="popup_homepage" class="modal fade landing-modal" tabindex="-1">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content" style="border : none !important">
                                <div class="modal-body text-center">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-close"></i></button>
                                    <div class="modal-title">
                                        <h2><a href="register" data-toggle="modal">Introducing</a> World's First Automated <a href="javascript:void(0);" data-dismiss="modal" aria-label="Close">Virtual</a> Lawyer</h2>
                                    </div>
                                    <div class="total-prop-modal clearfix">
                                        <span class="total-prop-modal-text">Over</span>
                                        <span class="home-counter">5000</span>
                                        <span class="total-prop-modal-text">different case topics to match your needs</span>
                                    </div>
                                    
									<div class="homepage" style="margin-top:10px">
									<h5 class="dot-more purple">With the Automated Virtual Lawyer you can 
									<ul>
									<li>Save <b>Big Amounts</b> of money. Simply Register and use it from the dashboard</li>
									<li>Send a legal claim or notice</li>
									<li>Respond or defend a legal claim or notice</li>
									<li>Step by step generate legal docs and contracts</li>
									</ul>
									</h5>
									</div>
							    
                                <div class="modal-footer">
                                    <div class="btn-group btn-group-justified">
                                        <a href="register" class="btn btn-primary" data-toggle="modal">Register Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
				</div>-->
                <div id="popup_message" class="modal fade ng-scope" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header" style="text-align:center">
                                <button type="button" class="close" data-dismiss="modal">×</button>
                                <h5 class="modal-title"></h5>
                            </div>                          
                        </div>						
                    </div>
                </div>                
				


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/momentjs/2.14.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.0/Chart.bundle.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.5/js/bootstrap-select.min.js"></script>

<script src="/wp-content/themes/wp-bootstrap-starter/inc/assets/js/difflib.js"></script> 
<script src="/wp-content/themes/wp-bootstrap-starter/inc/assets/js/diffview.js"></script>
<script src="https://www.google.com/recaptcha/api.js"></script>
<script type="text/javascript">

function commaSeparateNumber(val) 
{
	while (/(\d+)(\d{3})/.test(val.toString())) {
		val = val.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
	}
	
	return val;
}

function stripeFn()
{    
    setTimeout(function() 
    { 
        $("button.stripe-button-el").css({
        "background":"transparent",
        "box-shadow":"0 0px 0 rgba(0,0,0,0.2)",
        "webkit-box-shadow":"0 0px 0 rgba(0,0,0,0.2)",
        "min-width":"150px",
         });
        
        $("button.stripe-button-el span").css({
        "background":"#b01e42",
        "border-radius":"5px",
        });
        
        /*$("button.stripe-button-el span").each(
            function() { 
              var html = $(this).html();
              if(html.includes("Help"))
              {
                html = '<i class="fa fa-file"></i>&nbsp;' + html;
                }
                else{
                 html = '<i class="fa fa-search"></i>&nbsp;' + html;
                }
                
                $(this).html(html);
            });*/
        
    }, 100);
}

function topicData(elem, context, email)
{
    $('.' + context + '_context_remove').attr('style', 'display:block');		  
    
    elem.closest('div').find('.context-results').html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>');		
    
    var cntxt = elem.attr('name');
    var obj = { caseq : elem.val().toLowerCase(), context : cntxt, topic_email : email };
    
    var url = "wp-content/themes/wp-bootstrap-starter/caseq.php";
    var hr = new XMLHttpRequest();
    hr.onreadystatechange = function() 
    {
        if (hr.readyState == 4) 
        {           
            var jObj = JSON.parse(hr.responseText);
            var htm = '';
            if(context == 'help')
            {
                $('.topic-data').val( jObj['topicdata'] );
                elem.closest('div').find('.topic-link').html('Topic Link: <a class="dot-more purple" href="' + jObj['topiclink'] + '">' + jObj['topiclink'] + '</a>&nbsp;&nbsp;<button class="btn btn-primary btn-xs copy-clipboard" link="' + jObj['topiclink'] + '">Copy link to clipboard</button>');
                elem.closest('div').find('.update-topic').attr('topic', jObj['id']);
                htm += '<h4>Topic Questionnaire Form</h4>';    
                copyClipboard();
            }
            
            if(context !== 'help' && jObj.hasOwnProperty('topic'))
            {
                htm += jObj['topic'];
            }
            else if(context == 'help')
            {
                htm += '<p>Please render the form by clicking Json To Questionnaire button</p>';
            }
            
            elem.closest('div').find('.context-results').html( htm );
             
            if(cntxt !== 'lawyer_context')
            {
                if(context == 'help')
                {
                    formControl(elem, '-' + jObj['doctype']);
                }
                else
                {
                    formControl(elem, '-' + context);
                }
                
                stripeFn();
            }
        }
    }

    hr.open("POST", url, true);    
    hr.send(JSON.stringify(obj));
}

function multiSelectLaw()
{
    $('.practicelaw').multiselect({
    templates: { // Use the Awesome Bootstrap Checkbox structure
      li: '<li class="checkList"><a tabindex="0"><div class="aweCheckbox aweCheckbox-danger"><label for=""></label></div></a></li>'
    }
	});
	
	$('.multiselect-container div.aweCheckbox').each(function(index) {

    var id = 'multiselect-' + index;
    var input = $(this).find('input');

    // Associate the label and the input
    $(this).find('label').attr('for', id);
    
	input.attr('id', id);

    // Remove the input from the label wrapper
    input.detach();

    // Place the input back in before the label
    input.prependTo($(this));

    $(this).click(function(e) {
      // Prevents the click from bubbling up and hiding the dropdown
      e.stopPropagation();
    });

  });
  
  $('.selectpicker').selectpicker({
   size: '10'
    });
}

$(document).ready(function () 
{
	$({ someValue: 0 }).animate({ someValue: 411 }, {
    duration: 5000,
    easing: 'swing', // can be anything
    step: function () { // called on every step
        // Update the element's text with rounded-up value:
        $('.countd').html('<h3><i class="fa fa-gavel"></i></h3>' + commaSeparateNumber(Math.round(this.someValue)) + " documents generated");
    }
	});
	
	$({ someValue: 0 }).animate({ someValue: 1000 }, {
    duration: 5000,
    easing: 'swing', // can be anything
    step: function () { // called on every step
        // Update the element's text with rounded-up value:
        $('.countm').html('<h3><i class="fa fa-gbp"></i></h3>' + commaSeparateNumber(Math.round(this.someValue)) + " saved per user");
    }
	});
	
	$({ someValue: 0 }).animate({ someValue: 30 }, {
    duration: 5000,
    easing: 'swing', // can be anything
    step: function () { // called on every step
        // Update the element's text with rounded-up value:
        $('.countt').html('<h3><i class="fa fa-clock-o"></i></h3>' + commaSeparateNumber(Math.round(this.someValue)) + " days saved per user");
    }
	});

	var url = decodeURIComponent(document.location.toString());
	if (url.match('#')) {
		var splitHash = url.split('#');
        $('.nav-tabs a[href="#' + splitHash[1] + '"]').tab('show');
        if(splitHash.length > 2)
        {
            var elem = $('input[name="' + splitHash[1] + '_context"]');
            elem.val(splitHash[2]); 
            var email = splitHash.length > 3 ? splitHash[3] : '';
            topicData(elem, splitHash[1], email);    
        }            
	} 

	// Change hash for page-reload
	$('.nav-tabs a').on('shown.bs.tab', function (e) {
		window.location.hash = e.target.hash;
	});
	
	$(".question-part h4").click(function () 
	{
		if ($(this).next(".accordion-section-content").is(":visible"))
		{
			$(this).next(".accordion-section-content").slideUp(300);
			$(this).removeClass("active");
		} else
		{
			$(".question-part .accordion-section-content").slideUp(300);
			$(".question-part h4").removeClass("active");
			$(this).next(".accordion-section-content").slideDown();
			$(this).addClass("active");
		}
	});
	
	$(".header-login a").click(function(){
        $(this).toggleClass("active");
        $(".header-login-form.login-form").toggle("slideDown");
        $(".header-login-form.forgot-form").hide();
    });
	
	tooltipInit();
	
	multiSelectLaw();
    
  $('.view-pdf').on('click',function(){
		var pdf_link = $(this).attr('href');
		var iframe = '<div class="iframe-container"><iframe src="'+pdf_link+'"></iframe></div>'
		
		$.createModal({
		title:'My Title',
		message: iframe,
		closeButton:true,
		scrollable:false
		});
		
		return false;        
	});
		
	var offset = 150;
	var scroll_top_duration = 700;
	var back_to_top = $('.scroll-top');

	//hide or show the "back to top" link
	$(window).scroll(function(){
		( $(this).scrollTop() > offset ) ? back_to_top.show() : back_to_top.hide();            
	});

	//smooth scroll to top
	back_to_top.on('click', function(event){
		event.preventDefault();
		$('body,html').animate({
			scrollTop: 0 ,
			}, scroll_top_duration
		);
	});
	
	addCalcData();
	
	suggestTopic();
    
    clearSubmitData();
    
    stripeFn();
    
});

function askToLogin()
{
    $('#popup_message h5').html('Please <a class="dot-more purple" href="/login"><i class="fa fa-sign-in"></i>&nbsp;login here</a> to use the functionality.');
    $('#popup_message').modal('show');
}

function clearSubmitData()
{
    if ( window.history.replaceState ) 
    {
        window.history.replaceState( null, null, window.location.href );
    }   
}

function alertNotification(elem, msg)
{
   elem.prev('.alert').remove();
   var alert = '<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">×</a>' + msg + '</div>';
   $(alert).insertBefore(elem);
}


function showPopup(elem, dispTxt)
{
    var popover = elem.popover({placement : 'top',
                                trigger : 'focus'
                               });
                
    popover.data('bs.popover').options.content = dispTxt
   
    $(':not(#blabla)').on('click', function (e) 
    { 
        elem.each(function () 
        { 
            if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) 
            { 
                $(this).popover('hide'); 
            } 
        }); 
    });                
    
    popover.popover('show');  
   
}

function copyClipboard()
{
    $(".copy-clipboard").unbind("click").click(function(e)
    {
       var str = $(this).attr('link');
       const el = document.createElement('textarea');
       el.value = str;
       document.body.appendChild(el);
       el.select();
       document.execCommand('copy');
       document.body.removeChild(el);
    });
} 

function suggestTopic()
{
    $(".suggest-topic").unbind("click").click(function(e)
    {
        e.preventDefault();
        var val = $("#suggest-topic-form input[name='topic']").val();
        if(val)
        {
            var jsonObj = {suggesttopic : val};            
            var url = "wp-content/themes/wp-bootstrap-starter/caseq.php";
            var hr = new XMLHttpRequest();
            hr.onreadystatechange = function() 
            {
                if (hr.readyState == 4) 
                {           
                    $("#suggest-topic-form input[name='topic']").val('');
                    $('#popup_message h5').html('Thank your sending your suggestion topic.');
                    $('#popup_message').modal('show');
                }
            }
            
            hr.open("POST", url, true);    
            hr.send(JSON.stringify({suggestions : JSON.stringify( jsonObj ) }));
        }
        else
        {
            showPopup($('#suggest-topic-form button'), 'Please put in a suggestion topic in the input box next to this button');
        }        
    });
}

function toolTipSanitize()
{
	$('[data-toggle=tooltip]').each(function () 
	{
		var aStr = $(this).attr('title');
		if(!aStr.includes(' '))
        {
        	aStr = atob(aStr);
		}
				
		$(this).attr('title', aStr);
	});
	
}

function tooltipInit()
{
	$('[data-toggle="tooltip"]').tooltip({trigger: "hover", 
											   html: true, 
											   trigger: 'click', 
											   placement: "bottom"
												});
	
	$(':not(#blabla)').on('click', function (e) {
        $('[data-toggle=tooltip]').each(function () 
		{
            if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.tooltip').has(e.target).length === 0) {
                (($(this).tooltip('hide').data('bs.tooltip')||{}).inState||{}).click = false;
            }
        });
    });
}

function sliderInit()
{
	$('input[type=range]').on('input', function()
	{
		var name = $(this).attr('name') + "_OUTPUT";
		var suffixVal = $("output[name='" + name + "']").attr("suffix");
		if (typeof attr !== typeof undefined && attr !== false) 
		{
			suffixVal = '';
		}
		
		$("output[name='" + name + "']").val($(this).val() + suffixVal);
	});
}

function addCalcData()
{
	addFirstParty();
	addSecondParty();
	addEvidence();
	addInjury();
	addMiscCosts();
}

function injuryHtml(elem, uuid)
{
    var selectElem = elem.closest('fieldset').find('.injury-select');
    var val = selectElem.val();
    
    var optSel = selectElem.find('option:selected'); 
    var info = atob(optSel.attr("info"));
    var einfo = atob(optSel.attr("einfo"));
    
    if(!einfo.startsWith('<p>'))
    {
        einfo = '<p>' + einfo + '</p>';
    }
    
    var award = atob(optSel.attr("award"));
    
    var html = '<h5 class="eiem-block">' + '<p><span class="dot-more purple">' + val + '</span>&nbsp;&nbsp;<a style="font-size:0.75em" href="javascript:void(0);" onclick="$(this).parents(\'h5\').remove();"><i class="fa fa-trash-o"></i>&nbsp;remove this injury</a></p>';
    html += '<p>Please specify below your injury level ';
    html += '<i class="fa fa-question-circle" aria-hidden="true" data-toggle="tooltip" data-placement="left" title="' + info + '"></i>';
    html += ' along with a short description.';
    html += '<i class="fa fa-question-circle" aria-hidden="true" data-toggle="tooltip" data-placement="left" title="' + einfo + '"></i></p>';
    
    
    html += '<input type="hidden" name="injury_type_' + uuid + '" value="' + val + '">';
    
    var levels = atob(optSel.attr("levels")); 
    var splitStr = levels.split(",");
    html += '<select name=injury_level_' + uuid + ' required>';
    html += ' <option disabled selected value> Injury Level </option>';
    for(var i = 0; i < splitStr.length; i++)
    {
        html += '<option value="' + splitStr[i] + '">' + splitStr[i] + '</option>';
    }
    
    html += '</select>';
    
    html += '<textarea rows="3" name="injury_desc_' + uuid + '" placeholder="please describe your injury briefly along with the cause or reason" required></textarea>';
    html += '<input type="hidden" name="injury_levels_' + uuid + '" value="' + levels + '">';
    html += '<input type="hidden" name="injury_award_' + uuid + '" value="' + award + '">';
    html += '<input type="hidden" name="injury_ev_' + uuid + '" value="' + einfo + '">';		
    html += '</h5>';
    
    elem.closest('fieldset').find('.injury-checklist').prepend(html);
    
    toolTipSanitize();
    tooltipInit();
}

function addInjury()
{
	$('.add-injury').unbind("click").click(function(e)
	{
		var uuid = uuidv4();
        injuryHtml($(this), uuid);
	});
}

function mcHtml(elem, uuid)
{
    var selectElem = elem.closest('fieldset').find('.misc_costs-select');
    var val = selectElem.val();
    
    var optSel = selectElem.find('option:selected'); 
    var einfo = atob(optSel.attr("einfo"));
    
    var html = '<h5 class="eiem-block">' + '<p><span class="dot-more purple">' + val + '</span>&nbsp;&nbsp;<a style="font-size:0.75em" href="javascript:void(0);" onclick="$(this).parents(\'h5\').remove();"><i class="fa fa-trash-o"></i>&nbsp;remove this damage/cost</a></p>';
    html += '<p>Please specify below the cost of the item ';
    html += '<i class="fa fa-question-circle" aria-hidden="true" data-toggle="tooltip" data-placement="left" title="' + einfo + '"></i>';
    html += ' along with a short description</p>'; 
    
    html += '<input type="hidden" name="misc_costs_ev_' + uuid + '" value="' + einfo + '">';
    html += '<input type="hidden" name="misc_costs_type_' + uuid + '" value="' + val + '">';
    html += '<input type="text" max="500000" class="datatype-integer" name="misc_costs_amount_' + uuid + '" placeholder="please enter the cost/damage">';
    html += '<textarea rows="3" name="misc_costs_desc_' + uuid + '" placeholder="please describe this cost/damage briefly"></textarea>';
    html += '</h5>';
    
    elem.closest('fieldset').find('.misc_costs-checklist').prepend(html);
    
    initControls();
    toolTipSanitize();
    tooltipInit();
    validate();   
}

function addMiscCosts()
{
	$('.add-misc_costs').unbind("click").click(function(e)
	{
        var uuid = uuidv4();
        mcHtml($(this), uuid);
	});
}

function evHtml(elem, uuid)
{
    var val = elem.closest('fieldset').find('.evidence-select').val();
    var html = '<h5 class="eiem-block">' + '<p><span class="dot-more purple">' + val + '</span>&nbsp;&nbsp;<a style="font-size:0.75em" href="javascript:void(0);" onclick="$(this).parents(\'h5\').remove();"><i class="fa fa-trash-o"></i>&nbsp;remove this evidence</a></p>';
    html += '<p>Please specify below the evidence date and short description as to what the evidence is and relating to what cause or reason. Please also describe whether the evidence is simply mentioned or is actually attached with your letter that you are sending. </p>'; 
    
    html += '<input type="hidden" name="evidence_type_' + uuid + '" value="' + val + '">';
    html += '<input type="date" name="evidence_date_' + uuid + '" value="2021-08-10" required>';
    html += '<textarea rows="3" name="evidence_desc_' + uuid + '" placeholder="please specify the evidence description briefly and also mention how it helps your case" required></textarea>';
    html += '</h5>';
    elem.closest('fieldset').find('.evidence-checklist').prepend(html);
}

function addEvidence()
{
	$('.add-evidence').unbind("click").click(function(e)
	{
		var uuid = uuidv4();
        evHtml($(this), uuid);        
	});
}

function frmName()
{
    var hash = window.location.hash;
    var frm = '';
    if(hash.startsWith('#send'))
    {
        frm = '#send_topicform';
    }
    else if(hash.startsWith('#respond'))
    {
        frm = '#respond_topicform';
    }
    else if(hash.startsWith('#doc'))
    {
        frm = '#doc_topicform';
    }    
    
    return frm;
}

function frmCalc()
{
    var hash = window.location.hash;
    var frm = '';
    if(hash === '#send')
    {
        frm = '#send_calcform';
    }
    else if(hash === '#respond')
    {
        frm = '#respond_calcform';
    }
    else if(hash === '#doc')
    {
        frm = '#doc_calcform';
    }    
    
    return frm;
}

function addIM(frm)
{
    var obj = cpDataObj();
    elem = $(frm + ' .add-injury');
    var cls = '.injury-select';
    for(var key in obj)
    {
        if(key.includes('injury_type_'))
        {
            var uuid = key.substring(12);
            
            var desc = 'injury_desc_' + uuid;
            var levels = 'injury_levels_' + uuid;
            var award = 'injury_award_' + uuid;
            var ev = 'injury_ev' + uuid;
            var sel = 'injury_level_' + uuid;
            
            setValSelectFromKey(document.querySelector(frm + ' ' + cls), key, obj);
            injuryHtml(elem, uuid);
            
            setVal($(frm + ' input[name="' + key + '"]'), "input", obj);
            setVal($(frm + ' input[name="' + levels + '"]'), "input", obj);
            setVal($(frm + ' input[name="' + award + '"]'), "input", obj);
            setVal($(frm + ' input[name="' + ev + '"]'), "input", obj);
            setVal($(frm + ' textarea[name="' + desc + '"]'), "textarea", obj);
            setValSelect(document.querySelector(frm + ' select[name="' + sel + '"]'), obj);
        }
    }
    
    cls = '.misc_costs-select';
    elem = $(frm + ' .add-misc_costs');
    for(var key in obj)
    {
        if(key.includes('misc_costs_type_'))
        {
            var uuid = key.substring(16);
            var ev = 'misc_costs_ev_' + uuid;
            var am = 'misc_costs_amount_' + uuid;
            var desc = 'misc_costs_desc_' + uuid;
            
            setValSelectFromKey(document.querySelector(frm + ' ' + cls), key, obj);
            mcHtml(elem, uuid);
            
            setVal($(frm + ' input[name="' + key + '"]'), "input", obj);
            setVal($(frm + ' input[name="' + ev + '"]'), "input", obj);
            setVal($(frm + ' input[name="' + am + '"]'), "input", obj);
            setVal($(frm + ' textarea[name="' + desc + '"]'), "textarea", obj);
        }
    }
}

function addCPE(frm)
{
    var obj = cpDataObj();
    var elem = $(frm + ' .add-firstparty');
    for(var key in obj)
    {
        if(key.includes('firstparty_name_'))
        {
            var uuid = key.substring(16);
            var det = 'firstparty_details_' + uuid;
            fpHtml(elem, uuid);
            setVal($(frm + ' input[name="' + key + '"]'), "input", obj);
            setVal($(frm + ' textarea[name="' + det + '"]'), "textarea", obj);
        }
    }
    
    
    elem = $(frm + ' .add-secondparty');
    for(var key in obj)
    {
        if(key.includes('secondparty_name_'))
        {
            var uuid = key.substring(17);
            var det = 'secondparty_details_' + uuid;
            spHtml(elem, uuid);
            setVal($(frm + ' input[name="' + key + '"]'), "input", obj);
            setVal($(frm + ' textarea[name="' + det + '"]'), "textarea", obj);
        }
    }
    
    elem = $(frm + ' .add-evidence');
    var cls = '.evidence-select';
    for(var key in obj)
    {
        if(key.includes('evidence_type_'))
        {
            var uuid = key.substring(14);
            var evDate = 'evidence_date_' + uuid;
            var desc = 'evidence_desc_' + uuid;
            
            setValSelectFromKey(document.querySelector(frm + ' ' + cls), key, obj);
            
            evHtml(elem, uuid);
            setVal($(frm + ' input[name="' + key + '"]'), "input", obj);
            setVal($(frm + ' input[name="' + evDate + '"]'), "input", obj);
            setVal($(frm + ' textarea[name="' + desc + '"]'), "textarea", obj);
        }
    }
}

function cpData()
{    
    var frm = frmName();
    if(frm !== '')
    {
        var caseQ = $(frm + ' input[name="caseq"]').val();
        var url = "wp-content/themes/wp-bootstrap-starter/caseq.php";
        var hr = new XMLHttpRequest();
        hr.onreadystatechange = function() 
        {
            if (hr.readyState == 4) 
            {           
                $(frm).attr('cpdata', hr.responseText);
                addCPE(frm);
                fillForm(frm);
            }
        }
        
        hr.open("POST", url, true);    
        hr.send(JSON.stringify({qformq : caseQ})); 
    }
}

function cpDataObj()
{
    var frm = frmName();
    var obj = hasAttribute($(frm), 'cpdata') ? formToJSON(JSON.parse($(frm).attr('cpdata'))) : {};
    return obj;
}

function setValEvPattern(elem, lookupPat, lookupVal, pattern, obj)
{
    var found = false;
    
    for (var key in obj) 
    {
        if(key.includes(lookupPat))
        {
            var evType = obj[key];
            if(evType === lookupVal)
            {
                var tmpArr = key.split("_");
                var keyPat = pattern + tmpArr[tmpArr.length - 1];
                if(obj.hasOwnProperty(keyPat))
                {
                    $(elem).val(obj[keyPat]);
                    found = true;
                }
            }
        }
        
        if(found)
        {
            break;
        }
    }
}

function setVal(elem, type, obj)
{
    if(obj.hasOwnProperty(elem.name))
    {
        elem.value = obj[elem.name];
        
        if(type === "range")
        {
            var name = elem.name + "_OUTPUT";
            var suffixVal = $("output[name='" + name + "']").attr("suffix");
            if (typeof attr !== typeof undefined && attr !== false) 
            {
                suffixVal = '';
            }
            
            $("output[name='" + name + "']").val(elem.value + suffixVal);
        }
    }
}

function setValRadio(elem, obj)
{
    if(obj.hasOwnProperty(elem.name) && obj[elem.name] === elem.value)
    {
        elem.setAttribute('checked', true);
    }
}

function setValSelect(elem, obj)
{
     for ( var i = 0; i < elem.options.length; i++ ) 
     {
        if ( elem.options[i].value === obj[elem.name]) 
        {
            elem.value = obj[elem.name];
            elem.options[i].selected = true;
            break;
        }

    }
}

function setValSelectFromKey(elem, key, obj)
{
     for ( var i = 0; i < elem.options.length; i++ ) 
     {
        if ( elem.options[i].value === obj[key]) 
        {
            elem.value = obj[key];
            elem.options[i].selected = true;
            break;
        }

    }
}

function fillForm(frm)
{
    var obj = cpDataObj();
    var elements = document.querySelector(frm).elements;    
    for (var i = 0; i < elements.length; i++) 
    {
        if(elements[i].name === "CLAIM_AMOUNT")
        {
            continue;
        }        
        else if(elements[i].name && (elements[i].type.toLowerCase() === 'text' || elements[i].tagName.toLowerCase() === 'textarea' || elements[i].type.toLowerCase() === 'date' || elements[i].type.toLowerCase() === 'range'))
        {
            setVal(elements[i], elements[i].type.toLowerCase(), obj);
        } 
        else if(elements[i].name && (elements[i].type.toLowerCase() === 'radio' || elements[i].type.toLowerCase() === 'checkbox'))
        {
            setValRadio(elements[i], obj);
        }  
        else if(elements[i].name && elements[i].tagName.toLowerCase() === 'select')
        {
            setValSelect(elements[i], obj);
        }          
    }
}

function fpHtml(elem, uuid)
{
    var html = '<h5 class="eiem-block">' + '<p>Party Details&nbsp;&nbsp;<a style="font-size:0.75em" href="javascript:void(0);" onclick="$(this).parents(\'h5\').remove();"><i class="fa fa-trash-o"></i>&nbsp;remove this party</a></p>';
    //html += '<p>Please specify below the party name and the other relevant information such as address, email, phone or other details. The name can be an individual or a company name. </p>'; 
    
    //html += '<label class="contact-message alert alert-info">Please enter the party name below<br/>e.g. Mr. Joe Bloggs or XYZ limited</label>';
    
    html += '<label class="margin-10-t">Party Name</label>';
    html += '<input class="required-field" type="text" required name="firstparty_name_' + uuid + '" placeholder="e.g. Mr. Joe Bloggs or XYZ Limited">';
    
    html += '<label class="margin-10-t">Party Address</label>';
    html += '<textarea class="required-field" required rows="3" name="firstparty_details_' + uuid + '" placeholder="e.g. The address of the party. Put NA if not available"></textarea>';
    
    html += '<label class="margin-10-t">Email Address (if available)</label>';
    html += '<input type="text" name="firstparty_email_' + uuid + '" placeholder="e.g. abc@gmail.com">';
    
    html += '<label class="margin-10-t">Phone Number (if available)</label>';
    html += '<input type="text" name="firstparty_phone_' + uuid + '" placeholder="e.g. +447700000000">';
    
    
    //html += '<label class="contact-message alert alert-info">Please enter known information about the party such as address, email, phone and/or other details below<br/>e.g. Address: The address of the party<br/>Email: someone@example.com<br/>Phone: A phone number<br/>and/or other details</label>';
    
    html += '<label class="margin-10-t">Other Details</label>';
    //html += '<textarea rows="3" name="firstparty_details_' + uuid + '" placeholder="e.g. Address: The address of the party&#10;Email: someone@example.com&#10;Phone: A phone number&#10;and/or other details"></textarea>';
    html += '<textarea rows="3" name="firstparty_other_' + uuid + '" placeholder="e.g. any other details such as Facebook page or LinkedIn url"></textarea>';
    html += '</h5>';
    
    elem.closest('fieldset').find('.firstparty-checklist').prepend(html);
}

function spHtml(elem, uuid)
{
    var html = '<h5 class="eiem-block">' + '<p>Party Details&nbsp;&nbsp;<a style="font-size:0.75em" href="javascript:void(0);" onclick="$(this).parents(\'h5\').remove();"><i class="fa fa-trash-o"></i>&nbsp;remove this party</a></p>';
    //html += '<p>Please specify below the party name and the other relevant information such as address, email, phone or other details. The name can be an individual or a company name. </p>'; 
    
    //html += '<label class="contact-message alert alert-info">Please enter the party name below<br/>e.g. Mr. Joe Bloggs or XYZ limited</label>';
    
    html += '<label class="margin-10-t">Party Name</label>';
    html += '<input class="required-field" type="text" required name="secondparty_name_' + uuid + '" placeholder="e.g. Mr. Joe Bloggs or XYZ Limited">';
    
    html += '<label class="margin-10-t">Party Address</label>';
    html += '<textarea class="required-field" required rows="3" name="secondparty_details_' + uuid + '" placeholder="e.g. The address of the party. Put NA if not available"></textarea>';
    
    html += '<label class="margin-10-t">Email Address (if available)</label>';
    html += '<input type="text" name="secondparty_email_' + uuid + '" placeholder="e.g. abc@gmail.com">';
    
    html += '<label class="margin-10-t">Phone Number (if available)</label>';
    html += '<input type="text" name="secondparty_phone_' + uuid + '" placeholder="e.g. +447700000000">';
    
    
    //html += '<label class="contact-message alert alert-info">Please enter known information about the party such as address, email, phone and/or other details below<br/>e.g. Address: The address of the party<br/>Email: someone@example.com<br/>Phone: A phone number<br/>and/or other details</label>';
    
    html += '<label class="margin-10-t">Other Details</label>';
    //html += '<textarea rows="3" name="firstparty_details_' + uuid + '" placeholder="e.g. Address: The address of the party&#10;Email: someone@example.com&#10;Phone: A phone number&#10;and/or other details"></textarea>';
    html += '<textarea rows="3" name="secondparty_other_' + uuid + '" placeholder="e.g. e.g. any other details such as Facebook page or LinkedIn url"></textarea>';
    html += '</h5>';
    
    //var html = '<h5 class="eiem-block">' + '<p>Party Details&nbsp;&nbsp;<a style="font-size:0.75em" href="javascript:void(0);" onclick="$(this).parents(\'h5\').remove();"><i class="fa fa-trash-o"></i>&nbsp;remove this party</a></p>';
    //html += '<p>Please specify below the party name and the other relevant information such as address, email, phone or other details. The name can be an individual or a company name. </p>'; 
    
    //html += '<label class="contact-message alert alert-info">Please enter the party name below<br/>e.g. Mr. Joe Bloggs or XYZ limited</label>';
    //html += '<textarea rows="3" name="secondparty_name_' + uuid + '" placeholder="e.g. Mr. Joe Bloggs or XYZ Limited" required></textarea>';
    //html += '<label class="contact-message alert alert-info">Please enter known information about the party such as address, email, phone and/or other details below<br/>e.g. Address: The address of the party<br/>Email: someone@example.com<br/>Phone: A phone number<br/>and/or other details</label>';
    //html += '<textarea rows="3" name="secondparty_details_' + uuid + '" placeholder="e.g. Address: The address of the party&#10;Email: someone@example.com&#10;Phone: A phone number&#10;and/or other details" required></textarea>';
    //html += '</h5>';
    
    elem.closest('fieldset').find('.secondparty-checklist').prepend(html);    
}

function addFirstParty()
{
	$('.add-firstparty').unbind("click").click(function(e)
	{
		var uuid = uuidv4();
		fpHtml($(this), uuid);
	});
}

function addSecondParty()
{
	$('.add-secondparty').unbind("click").click(function(e)
	{
		var uuid = uuidv4();
		spHtml($(this), uuid);
	});
}

function uuidv4() {
  return 'xxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
    return v.toString(10);
  });
}

function validate()
{
	$('.datatype-integer').on("input", function()
	{
		var max = $(this).attr("max");
		$(this).val($(this).val().replace(/[^0-9]/g, '')); 
		var val = parseInt($(this).val(), 10);
		if(typeof max !== typeof undefined && max !== false && !isNaN(val) && val > parseInt(max, 10)) 
		{ 
			val = max;
		}
		
		if(!isNaN(val))
		{
			$(this).val(val);
		}
	});
	
	$('.datatype-decimal').on("input", function()
	{
		$(this).val($(this).val().replace(/[^0-9\.]/g, '').replace(/(\..*)\./g, '$1')); 	
	});
	
	$('.datatype-decimal').on("blur", function()
	{
		var max = $(this).attr("max");		
		var val = parseFloat($(this).val(), 10).toFixed(2);	
		if(typeof max !== typeof undefined && max !== false && !isNaN(val) && val > parseFloat(max, 10)) 
		{ 
			val = max;
		}	

		if(!isNaN(val))
		{
			$(this).val(val);
		}
		else
		{
			$(this).val($(this).val().replace(/[^0-9]/g, ''));
		}
	});
}

function initControls()
{
    $('.input-group').datetimepicker({format: 'YYYY-MM-DD HH:mm'});
}

function hasAttribute(elem, attr)
{
    var attrS = elem.attr(attr);
    return (typeof attrS !== typeof undefined && attrS !== false);
}

function elemExists(elemStr)
{
    return document.querySelectorAll(elemStr).length > 0;
}

function validateFS(elem, fs)
{
    var iid =  fs.attr('id');
    var id = '#' + iid;
    
    if(iid === 'aqfp' && !elemExists(id + ' input[name*="firstparty_name"]'))
    {
        showPopup(elem, 'You must atleast create one first party');
        return false;
    }
    else if(iid === 'aqsp' && !elemExists(id + ' input[name*="secondparty_name"]'))
    {
        showPopup(elem, 'You must atleast create one second party');
        return false;
    }
    
    var retVal = true;
    $(id + ' input[type=text]').each( function() 
    {
        var name = $(this).attr('name');
        if (hasAttribute($(this), 'required') && !$(this).val() && name === "CLAIM_AMOUNT") 
        {
            retVal = false;
            msg = "Please ensure that you you use the claim calculator to derive a claim amount";
        }
        else if (hasAttribute($(this), 'required') && !$(this).val()) 
        {
            retVal = false;
            msg = "Please ensure that you fill in the text input field";
        }
    
    });
    
    $(id + ' input[type=date]').each( function() 
    {
        if (hasAttribute($(this), 'required') && !$(this).val()) 
        {
            retVal = false;
            msg = "Please ensure you specify a date";
        }
    
    });
    
    
    var radioMap = {};
    $(id + ' input[type=radio]').each( function() 
    {
        
        if($(this).is(':checked'))
        {
            radioMap[name] = true;  
        }
        else
        {
            if(!radioMap.hasOwnProperty(name))
            {
                radioMap[name] = false; 
            }
        }
    });
    
    for(var key in radioMap)
    {
        if(radioMap[key] === false)
        {
            retVal = false;
            msg = "You must select an option in the radio buttons";
        }
    }

    $(id + ' select').each( function() 
    {
        if (hasAttribute($(this), 'required') && !$(this).val()) 
        {
            retVal = false;
            msg = "Please ensure that you select an entry from the dropdown box";
        }
    });
    
    $(id + ' textarea').each( function() 
    {
        if (hasAttribute($(this), 'required') && !$(this).val()) 
        {
            retVal = false;
            msg = "Please ensure that the text area is filled";
        }
    });
    
    if(!retVal)
    {
        showPopup(elem, msg);
    }
    
    return retVal;
}

function formControl(topElem, docType)
{
	initControls();
    toolTipSanitize();
	tooltipInit();
	
	sliderInit();
	
	addCalcData();
	
	validate();
    
    if(topElem !== undefined)
    {
        cpData();
	}
    else
    {
        var frm = docType.startsWith('c-') ? '#' + docType.substring(2) + '_calcform' : '#' + docType.substring(1) + '_topicform';
        addIM(frm);
        fillForm(frm);
    }        
    
	var current_fs, next_fs, previous_fs; //fieldsets
	var left, opacity, scale; //fieldset properties which we will animate
	var animating; //flag to prevent quick multi-click glitches
	var FILLED_FIELDS = {};
	
	$('.fs_input').change(function()
	{
		var attr = $(this).attr("nextfs");
		if(typeof attr !== typeof undefined && attr !== false)
		{
			$(this).closest('fieldset').find('.next').attr("nextfs", attr);
		}
	});

	$(".next" + docType).unbind("click").click(function(){
		//if(animating) return false;
		//animating = true;
		
		current_fs = $(this).parent();
        
        // if this is finish then 
		if($(this).val() == 'Finish')
		{
			try
            {
                topElem.closest('div').find('input[class*=context]')[0].scrollIntoView();
            }
            catch(err)
            {
            }
            
            var jsonObj =  current_fs.parent().serializeArray();
			var calcForm = current_fs.parent().attr('calcform');
			if(typeof calcForm !== typeof undefined && calcForm !== false)
			{
				var calcObj = JSON.parse(calcForm);
				jsonObj = jsonObj.concat(calcObj);
			}
            
            current_fs.hide();
			
			$('.active .context-results').html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>');		
            
            var url = "wp-content/themes/wp-bootstrap-starter/caseq.php";
            var hr = new XMLHttpRequest();
            hr.onreadystatechange = function() 
            {
                
                if (hr.readyState == 4) 
                {           
                    $('.active .context-results').html(hr.responseText); 
                    stripeFn();
                }
            }
            
            hr.open("POST", url, true);    
            hr.send(JSON.stringify({qform : JSON.stringify( jsonObj ) })); 
            return false;
		}
		else if($(this).val() == 'Calculate')
		{
			current_fs.hide();
			
			var pform = current_fs.parent().attr("pform");
			var calcFormArray = current_fs.parent().serializeArray();
			var jsonObj =  calcFormArray;	
			if($('#' + pform).length > 0)
			{
				jsonObj = jsonObj.concat($('#' + pform).serializeArray());
			}
			
			$('#popup_message h5').html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>');		
			$('#popup_message').modal('show');				
			
            var url = "wp-content/themes/wp-bootstrap-starter/caseq.php";
            var hr = new XMLHttpRequest();
            hr.onreadystatechange = function() 
            {
                if (hr.readyState == 4) 
                {           
                    
                    var jObj = JSON.parse(hr.responseText);
				
                    $('#popup_casetask').modal('hide');
                    $('.notice-text').val(jObj['CLAIM_AMOUNT_TEXT']);
                    
                    if(jObj.hasOwnProperty('CLAIM_AMOUNT_NUMBER'))
                    {
                        $('input[name=CLAIM_AMOUNT]').val(jObj['CLAIM_AMOUNT_NUMBER']);
                    }
                    
                    $('#' + pform).attr('calcform',JSON.stringify(calcFormArray));
                    
                    if(jObj.hasOwnProperty('CLAIM_AMOUNT_EVIDENCE'))
                    {
                        $('#popup_casetask .modal-title').html( 'Your Evidence Checklist' );
                        $('#popup_casetask .modal-body').html( atob(jObj['CLAIM_AMOUNT_EVIDENCE']) );
                        var tooltip = '&nbsp;<a href="javascript:$(\'#popup_casetask\').modal(\'show\');" class="ev-checklist dot-more purple">Please click here <i class="fa fa-file-text-o"></i> for a checklist of evidences that you should attach.</a>';
                        var el = $('.evidence-checklist').closest('fieldset').find('h5[class="fs-subtitle quest"] .ev-checklist');
                        el.remove();
                        $('.evidence-checklist').closest('fieldset').find('h5[class="fs-subtitle quest"]').append(tooltip);
                    }
                    
                    $('#popup_message h5').html(jObj['CLAIM_AMOUNT']);		
                }
            }
            
            hr.open("POST", url, true);    
            hr.send(JSON.stringify({calculator : JSON.stringify( jsonObj ) })); 
            return false;
		}
        else
        {
            var val = validateFS($(this), current_fs);
            if(!val)
            {
                return false;
            }
            else
            {
                var jsonObj = {};
                if(hasAttribute(current_fs.parent(), "pform"))
                {
                    var pform = current_fs.parent().attr("pform");
                    var calcFormArray = current_fs.parent().serializeArray();
                    jsonObj = calcFormArray;	
                    if($('#' + pform).length > 0)
                    {
                        jsonObj = jsonObj.concat($('#' + pform).serializeArray());
                    }
                }
                else
                {
                    jsonObj =  current_fs.parent().serializeArray();
                    var calcForm = current_fs.parent().attr('calcform');
                    if(typeof calcForm !== typeof undefined && calcForm !== false)
                    {
                        var calcObj = JSON.parse(calcForm);
                        jsonObj = jsonObj.concat(calcObj);
                    }
                }                    
                
                var url = "wp-content/themes/wp-bootstrap-starter/caseq.php";
                var hr = new XMLHttpRequest();
                hr.onreadystatechange = function() 
                {                    
                }
                
                hr.open("POST", url, true);    
                hr.send(JSON.stringify({qformcp : JSON.stringify( jsonObj ) })); 
            }
        }
		
		var id = current_fs.attr("id");
		var attr = $(this).attr("nextfs");				
		if(typeof attr !== typeof undefined && attr !== false)
		{
			next_fs = $("fieldset[id='" + attr + "']");					
		}
		else
		{
			next_fs = $(this).parent().next();
		}
		
		// for coming back
		
		next_fs.find('.previous').attr("prevfs", id);
		
		//var formName = current_fs.parent().attr("id");
		//console.log(formName);
		
		/*current_fs.find('.fs_input').each(function() {FILLED_FIELDS[$(this).attr('name')] = $(this).val();});
		
		var aStr = next_fs.find('.quest').html();
		if(typeof aStr !== typeof undefined)
		{
			console.log(JSON.stringify(FILLED_FIELDS));
			for(var key in FILLED_FIELDS)
			{				
				aStr = aStr.replace(key, FILLED_FIELDS[key]);
			}
			
			next_fs.find('.quest').html(aStr);
			tooltipInit();
		}*/		
		
		//activate next step on progressbar using the index of next_fs
		$("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
		
		//show the next fieldset
		current_fs.hide();
		next_fs.show(); 
        next_fs[0].scrollIntoView(true);
		//hide the current fieldset with style
		/*current_fs.animate({opacity: 0}, {
			step: function(now, mx) {
				//as the opacity of current_fs reduces to 0 - stored in "now"
				//1. scale current_fs down to 80%
				scale = 1; // - (1 - now) * 0.2;
				//2. bring next_fs from the right(50%)
				left = (now * 50)+"%";
				//3. increase opacity of next_fs to 1 as it moves in
				opacity = 1 - now;
				current_fs.css({
			'transform': 'scale('+scale+')',
			'position': 'absolute'
		  });
				next_fs.css({'left': left, 'opacity': opacity});
			}, 
			duration: 800, 
			complete: function(){
				current_fs.hide();
				animating = false;
			}, 
			//this comes from the custom easing plugin
			easing: 'easeInOutBack'
		});*/
	});

	$(".prev" + docType).unbind("click").click(function(){
		//if(animating) return false;
		//animating = true;
		
		current_fs = $(this).parent();
		
		var attr = $(this).attr("prevfs");				
		if(typeof attr !== typeof undefined && attr !== false)
		{
			previous_fs = $("fieldset[id='" + attr + "']");					
		}
		else
		{
			previous_fs = $(this).parent().prev();
		}
		
		/*if(previous_fs.find('.previous').length == 0)
		{
			var fsElems = previous_fs.parent().find("fieldset");
			for(var i = 0; i < fsElems.length; i++)
			{
				if(fsElems[i].hasAttribute("question"))
				{
					$(fsElems[i]).find('.quest').html(atob(fsElems[i].getAttribute("question")));
				}
			}
		}*/
		
		
		//de-activate current step on progressbar
		$("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
		
		//show the previous fieldset
		current_fs.hide();
		previous_fs.show(); 
		previous_fs[0].scrollIntoView(true);
        
		//hide the current fieldset with style
		/*current_fs.animate({opacity: 0}, {
			step: function(now, mx) {
				
				//as the opacity of current_fs reduces to 0 - stored in "now"
				//1. scale previous_fs from 80% to 100%
				
				scale = 0.8 + (1 - now) * 0.2;
				//2. take current_fs to the right(50%) - from 0%
				left = ((1-now) * 50)+"%";
				//3. increase opacity of previous_fs to 1 as it moves in
				opacity = 1 - now;
				current_fs.css({'left': left});
				previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});
			}, 
			duration: 800, 
			complete: function(){
				current_fs.hide();
				animating = false;
			}, 
			//this comes from the custom easing plugin
			easing: 'easeInOutBack'
		});*/
	});	
}

function formToJSON(data)
{
    var obj = {};
    $.each( data, function(i,o)
    {
      var n = o.name,
        v = o.value;
        
        if(n.endsWith("[]"))
        {
            n = n.substring(0,n.length-2);
        }
        
        if(n !== "CLAIM_AMOUNT_TEXT" && n !== "CLAIM_TYPE")
        {
            obj[n] = obj[n] === undefined ? v
              : $.isArray( obj[n] ) ? obj[n].concat( v )
              : obj[n] + "," + v;
        }
    });
    
    return obj;
}

function numberWithCommas(x) 
{
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function b64EncodeUnicode(str) {
    return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,
        function toSolidBytes(match, p1) {
            return String.fromCharCode('0x' + p1);
    }));
}

function b64DecodeUnicode(str) {
    return decodeURIComponent(atob(str).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));
}

function clearMessage() 
{
    tinyMCE.activeEditor.setContent('');
}
	
</script>

<script type="text/javascript" src="wp-includes/js/wp-embed.min.js?ver=5.7.2" id="wp-embed-js"></script>



<script>
$(document).ready(function () 
{
    setTimeout(function() {
        $('#popup_homepage').modal('show');
    }, 5000);
});
</script>

</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>